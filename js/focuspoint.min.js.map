{"version":3,"sources":["app/image-focus.js","app/models/model.attachment.js","app/models/model.cropbutton.js","app/models/model.focusinterface.js","app/views/view.attachment.js","app/views/view.cropbutton.js","app/views/view.focusinterface.js","app/views/view.imagefocus.js"],"names":["$","window","IFA","Models","Collections","Views","css","_imageFocus","imageFocus","_wrapper","_img","_point","_clickarea","_button","button","_primary","_disabled","CalcService","minMaxRange","input","min","max","Math","document","on","ImageFocus","jQuery","Attachment","Backbone","Model","extend","url","ajaxurl","apiArgs","id","defaults","src","width","height","offset","x","y","focusPointOrigin","focusPoint","differState","ajaxState","$img","initialize","options","self","this","fetchAttachmentData","setDifferState","resetAjaxState","set","fetch","data","param","success","collection","validateFocusPoint","error","console","log","response","saveAttachmentData","save","origin","get","once","model","hasOwnProperty","CropButton","text","focusPointL10n","cropButton","highlightState","disableState","FocusInterface","radius","position","clickPosition","initState","moveState","activeState","hoverState","View","properties","focusInterface","_","bind","updateDimensions","left","top","Cropbutton","$cropButton","attachment","$el","append","differStateHandler","ajaxStateHandler","render","toggleClass","highlight","disable","cropButtonProgress","cropButtonSuccess","cropButtonFetching","cropButtonFailed","activate","template","imgHtml","$imageFocus","$container","$clickarea","$focusPoint","wp","addClass","outerHTML","wrap","find","updateFocusPoint","updateDimensionData","setStateEvent","events","html","imageObject","state","setElements","setEvents","event","which","startMove","move","reset","updateClickPosition","mouse","pageX","pageY","imageWidth","imageHeight","pos","backgroundImage","backgroundSize","backgroundPosition","axe","stateObject","stateClass","toggleClassState","setInterval","$attachmentDetails","length","each","$this","startApplication","$object","$detailsImage","el"],"mappings":"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","file":"focuspoint.min.js"}